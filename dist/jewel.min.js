/*! Jewel - v0.1.0 - 2012-05-06
* http://github.com/vdemedes/jewel/
* Copyright (c) 2012 Vadim Demedes; Licensed MIT */
var Jewel,Model;Function.prototype.clone=function(){var a,b;a=function(){};for(b in this)this.hasOwnProperty(b)&&(a[b]=this[b]);return a.prototype=this.prototype,a},Jewel=function(){function a(){}return a.name="Jewel",a.define=function(a,b){var c;return b==null&&(b={}),c=Model.clone(),c.prototype.selector=c.selector=a,c.prototype.options=c.options=b,c.__defineGetter__("all",function(){return c.find()}),c.prototype.model=c.model=c,c},a}(),Model=function(){function a(){}return a.name="Model",a.prototype.init=function(a){var b,c,d,e;if(!(a instanceof HTMLElement)){e=[];for(c in a)e.push(this[c]=a[c]);return e}this.element=a;if(this.options.keys){d=[];for(c in this.options.keys)b=$(a).find(this.options.keys[c]),d.push(this[c]=b.html());return d}},a.find=function(a){var b,c,d,e;a==null&&(a={}),c=$(this.selector).children(),e=void 0;if(c.length>0)if(a.skip||a.limit){b=0,e=[];for(;;){if(!c[b])break;b>=(a.skip||-1)&&b<(a.limit||c.length)&&(d=new this.model,d.init(c[b]),e.push(d)),b++}}return e||(e=c),e},a.prototype.fields=function(){var a,b,c;c=["init","save","remove","selector","options","model"],a={};for(b in this)-1===c.indexOf(b)&&(a[b]=this[b]);return a},a.prototype.save=function(){return this.element?this.update():this.create()},a.prototype.create=function(){return this.element=$(this.options.template(this.fields())),this.element.prependTo(this.selector)},a.prototype.update=function(){var a,b,c;a=this.fields(),c=[];for(b in a)c.push($(this.element).find(this.options.keys[b]).html(a[b]));return c},a.prototype.remove=function(){return $(this.element).remove()},a.remove=function(){return $(this.selector).remove()},a}();